AWS Region table :
https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/


IAM
Root Acc : should only be used for creating users and groups
Group : It only contains users  and not groups
Users :  it can be associated with 0 or more groups

Policy are json documents that provide permission and can be assigned to group or user

Role or IAM role: it is created so that services can access resources on our behalf in our accounts .
    These are also a set of permissions



IAM Security tools
1. IAM Credentials Report (account-level): A report that lists all your account's users and the status of their 
various credentials
2. IAM Access Advisor (user-level): Access advisor shows the service permissions granted to a user and when
 those services were last accessed. You can use this information to revise your policies.


 Amazon EC2
• EC2 is one of the most popular of AWS’ offering
• EC2 = Elastic Compute Cloud = Infrastructure as a Service
• It mainly consists in the capability of :
    • Renting virtual machines (EC2)
    • Storing data on virtual drives (EBS)
    • Distributing load across machines (ELB)
    • Scaling the services using an auto-scaling group (ASG)
    • Knowing EC2 is fundamental to understand how the Cloud works

EC2 sizing & configuration options
• Operating System (OS): Linux, Windows or Mac OS
• How much compute power & cores (CPU)
• How much random-access memory (RAM)
• How much storage space:
    • Network-attached (EBS & EFS)
    • hardware (EC2 Instance Store)
• Network card: speed of the card, Public IP address
• Firewall rules: security group
• Bootstrap script (configure at first launch): EC2 User Data


EC2 User Data
• It is possible to bootstrap our instances using an EC2 User data script.
• bootstrapping means launching commands when a machine starts
• That script is only run once at the instance first start
• EC2 user data is used to automate boot tasks such as:
    • Installing updates
    • Installing software
    • Downloading common files from the internet
    • Anything you can think of
• The EC2 User Data Script runs with the root user


If you start and stop an instance , Public IP may change but private doesn't change


You can use different types of EC2 instances that are optimised for
different use cases (https://aws.amazon.com/ec2/instance-types/)


Introduction to Security Groups
• Security Groups are the fundamental of network security in AWS
• They control how traffic is allowed into or out of our EC2 Instances.

 Security groups only contain allow rules
• Security groups rules can reference by IP or by security group



• Security groups are acting as a “firewall” on EC2 instances
• They regulate:
    • Access to Ports
    • Authorised IP ranges – IPv4 and IPv6
    • Control of inbound network (from other to the instance)
    • Control of outbound network (from the instance to other)



Security Groups
Good to know
• Can be attached to multiple instances
• Locked down to a region / VPC combination
• Does live “outside” the EC2 – if traffic is blocked the EC2 instance won’t see it
• It’s good to maintain one separate security group for SSH access
• If your application is not accessible (time out), then it’s a security group issue
• If your application gives a “connection refused“ error, then it’s an application
error or it’s not launched
• All inbound traffic is blocked by default
• All outbound traffic is authorised by default



Classic Ports to know
• 22 = SSH (Secure Shell) - log into a Linux instance
• 21 = FTP (File Transfer Protocol) – upload files into a file share
• 22 = SFTP (Secure File Transfer Protocol) – upload files using SSH
• 80 = HTTP – access unsecured websites
• 443 = HTTPS – access secured websites
• 3389 = RDP (Remote Desktop Protocol) – log into a Windows instance



# IAM Role vs Security Group (AWS) — Purpose, Use Cases, Where Used

1. IAM Role

---

What it is:

* An identity in AWS that has permissions (policies) attached.
* It controls what AWS API actions are allowed/denied.

What it controls:

* Authorization to AWS services and resources (S3, DynamoDB, SQS, Secrets Manager, CloudWatch, etc.)
* NOT network ports, NOT inbound/outbound traffic rules.

Where it is used:

* EC2 Instance Role (EC2 app accesses S3, CloudWatch, Secrets Manager)
* Lambda Execution Role
* ECS Task Role / Execution Role
* EKS IRSA (IAM role for Kubernetes service account)
* Cross-account access (AssumeRole)
* Temporary access via STS (short-lived credentials)

Typical use cases:

* EC2 needs to read/write S3 without storing access keys on the server.
* Lambda needs to write to DynamoDB or publish to SNS.
* App needs to fetch secrets from Secrets Manager or Parameter Store.
* One AWS account/user needs controlled access into another account (cross-account role).

Key mental model:

* IAM Role answers: "Can this identity do this action in AWS?"

2. Security Group

---

What it is:

* A VPC-level virtual firewall for resources.
* It controls what network traffic is allowed in/out (protocol + port + source/destination).

What it controls:

* Connectivity (network reachability) to/from a resource.
* It does NOT grant AWS API permissions like S3:GetObject.

Where it is used:

* EC2 instances
* RDS databases
* Load balancers (ALB/NLB)
* ECS services (awsvpc networking)
* Interface endpoints/ENI-based resources in a VPC

Typical use cases:

* Allow inbound HTTPS (443) from the internet to a web server.
* Allow SSH (22) only from your IP address.
* Allow app servers to reach the DB on 5432/3306, but block everyone else.
* Allow traffic from another security group (best practice inside VPC).

Key mental model:

* Security Group answers: "Can network traffic reach this resource on this port?"

3. Quick Comparison

---

IAM Role:

* Type: Authorization (AWS API permissions)
* Controls: Actions on AWS services/resources
* Example: Allow s3:GetObject, dynamodb:PutItem

Security Group:

* Type: Network firewall (connectivity)
* Controls: Inbound/outbound traffic (ports, protocols, sources)
* Example: Allow TCP 443 from 0.0.0.0/0; allow TCP 5432 from app SG

4. Real-World Example (Web App)

---

EC2 Web Server:

* Security Group:

  * Inbound: 443 from internet
  * Outbound: 5432 to DB security group
* IAM Role:

  * Allow reading files from S3
  * Allow writing logs to CloudWatch
  * Allow reading secrets from Secrets Manager

RDS Database:

* Security Group:

  * Inbound: 5432 only from EC2 Web Server security group
* IAM Role:

  * Usually not needed for basic DB connectivity (network + DB creds handle it)

5. Common Mistakes

---

* "I gave IAM permission but it still can’t connect"
  -> Check Security Group rules, routes, subnet, NACLs, DNS, etc.

* "Ports are open but app can’t access S3"
  -> Check IAM role attached to compute + correct policy permissions.

Rule of thumb:

* If the problem is "AWS access to a service" -> IAM Role
* If the problem is "ports / traffic / connectivity" -> Security Group



===============================================================================
Read about
1. Identity Center
2.